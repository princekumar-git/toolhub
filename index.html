<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="settings.png" type="image/png">
    <title>ToolHub | All-in-One Digital Arsenal</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Poppins', 'sans-serif'] },
                    colors: {
                        deep: '#1B211A',   /* Background */
                        moss: '#628141',   /* Primary/Borders */
                        sage: '#8BAE66',   /* Accents/Highlights */
                        sand: '#EBD5AB',   /* Text */
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #1B211A;
            background-image: radial-gradient(circle at 50% 0%, #2a3328 0%, #1B211A 70%);
            color: #EBD5AB;
            min-height: 100vh;
        }

        .glass-panel {
            background: rgba(27, 33, 26, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(98, 129, 65, 0.2);
        }

        .tool-card:hover {
            border-color: #8BAE66;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px -10px rgba(139, 174, 102, 0.3);
        }

        input, textarea, select {
            background: #151914 !important;
            border: 1px solid rgba(98, 129, 65, 0.3) !important;
            color: #EBD5AB !important;
            outline: none !important;
        }

        input:focus { border-color: #8BAE66 !important; }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #628141; border-radius: 10px; }
    </style>
</head>

<body class="font-sans antialiased selection:bg-sage selection:text-deep">

    <nav class="w-full backdrop-blur-lg bg-deep/80 border-b border-moss/30 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3 cursor-pointer" onclick="showSection('home')">
                <img src="settings.png" alt="logo" class="w-8 h-8">
                <span class="text-2xl font-bold tracking-tighter">ToolHub</span>
            </div>
            <div class="text-right">
                <div id="nav-clock" class="text-sage font-mono font-bold text-lg">00:00:00</div>
                <div id="nav-date" class="text-[10px] uppercase tracking-widest opacity-40">Loading...</div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 py-12">

        <section id="home-section">
            <div class="text-center mb-16">
                <h1 class="text-5xl md:text-6xl font-black mb-4 tracking-tight">Your Digital <span class="text-sage">Arsenal.</span></h1>
                <p class="text-sand/50 italic">Minimalist tools for developers, creators, and daily productivity.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div onclick="showSection('ai')" class="tool-card p-8 rounded-3xl glass-panel cursor-pointer transition-all border-2 border-sage/20">
                    <div class="text-sage text-4xl mb-4"><i class="fa-solid fa-robot"></i></div>
                    <h3 class="text-xl font-bold">AI Lexicon</h3>
                    <p class="text-sand/40 text-sm mt-2">Browse & search 15+ curated AI tools.</p>
                </div>
                
                <div onclick="showSection('currency')" class="tool-card p-8 rounded-3xl glass-panel cursor-pointer transition-all">
                    <div class="mb-4 text-sage text-4xl"><i class="fa-solid fa-coins"></i></div>
                    <h3 class="text-xl font-bold">Currency Converter</h3>
                    <p class="text-sand/40 text-sm mt-2">Live global exchange rates.</p>
                </div>

                <div onclick="showSection('json')" class="tool-card p-8 rounded-3xl glass-panel cursor-pointer transition-all">
                    <div class="text-sage text-4xl mb-4"><i class="fa-solid fa-code"></i></div>
                    <h3 class="text-xl font-bold">JSON DevTools</h3>
                    <p class="text-sand/40 text-sm mt-2">Format, Minify, and Validate JSON.</p>
                </div>

                <div onclick="showSection('clock')" class="tool-card p-8 rounded-3xl glass-panel cursor-pointer transition-all">
                    <div class="text-sage text-4xl mb-4"><i class="fa-solid fa-stopwatch"></i></div>
                    <h3 class="text-xl font-bold">Clock Suite</h3>
                    <p class="text-sand/40 text-sm mt-2">Stopwatch, Timer, & System Clock.</p>
                </div>

                <div onclick="showSection('pass')" class="tool-card p-8 rounded-3xl glass-panel cursor-pointer transition-all">
                    <div class="text-sage text-4xl mb-4"><i class="fa-solid fa-key"></i></div>
                    <h3 class="text-xl font-bold">Pass Generator</h3>
                    <p class="text-sand/40 text-sm mt-2">Secure, customizable random keys.</p>
                </div>

                <div onclick="showSection('weather')" class="tool-card p-8 rounded-3xl glass-panel cursor-pointer transition-all">
                    <div class="text-sage text-4xl mb-4"><i class="fa-solid fa-cloud-sun"></i></div>
                    <h3 class="text-xl font-bold">Weather Station</h3>
                    <p class="text-sand/40 text-sm mt-2">Real-time global weather data.</p>
                </div>

                <div onclick="showSection('calendar')" class="tool-card p-8 rounded-3xl glass-panel cursor-pointer transition-all">
                    <div class="text-sage text-4xl mb-4"><i class="fa-solid fa-calendar-days"></i></div>
                    <h3 class="text-xl font-bold">Calendar Suite</h3>
                    <p class="text-sand/40 text-sm mt-2">Full calendar & date calculators.</p>
                </div>
            </div>
        </section>

        <section id="ai-section" class="hidden">
            <button onclick="showSection('home')" class="text-sage mb-8 flex items-center ">
                <i class="fa-solid fa-angle-left mr-2"></i> Back
            </button>
            <div class="glass-panel p-8 rounded-3xl">
                <div class="text-center mb-10">
                    <h2 class="text-4xl font-black mb-2">AI Tool <span class="text-sage">Lexicon</span></h2>
                    <p class="text-sand/50 italic text-sm">Find the perfect AI for your workflow.</p>
                </div>

                <div class="flex flex-col md:flex-row gap-4 mb-8">
                    <div class="relative flex-1">
                        <i class="fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-moss"></i>
                        <input type="text" id="ai-search" onkeyup="filterAITools()" placeholder="Search tools (e.g. 'Image', 'Writing')..." class="w-full pl-12 pr-4 py-4 rounded-2xl">
                    </div>
                    <select id="ai-category-filter" onchange="filterAITools()" class="p-4 rounded-2xl font-bold md:w-48">
                        <option value="all">All Categories</option>
                        <option value="text">Text & Chat</option>
                        <option value="image">Image & Art</option>
                        <option value="code">Coding</option>
                        <option value="productivity">Productivity</option>
                    </select>
                </div>

                <div id="ai-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
            </div>
        </section>

        <section id="currency-section" class="hidden">
            <button onclick="showSection('home')" class="text-sage mb-8 flex items-center ">
                <i class="fa-solid fa-angle-left mr-2"></i> Back
            </button>
            <div class="max-w-2xl mx-auto glass-panel p-10 rounded-3xl">
                <h2 class="text-3xl font-bold mb-8">Currency Converter</h2>
                <div class="space-y-6">
                    <input type="number" id="curr-amount" value="1" class="w-full p-4 rounded-xl text-xl font-bold">
                    <div class="grid grid-cols-3 gap-2 items-center">
                        <select id="curr-from" class="p-4 rounded-xl font-bold">
                            <option value="USD">USD</option>
                            <option value="EUR">EUR</option>
                            <option value="GBP">GBP</option>
                            <option value="INR">INR</option>
                        </select>
                        <button onclick="swapCurrencies()" class="h-12 bg-moss/40 hover:bg-moss/60 rounded-xl transition-all flex items-center justify-center">
                            <i class="fa-solid fa-right-left text-sage text-lg"></i>
                        </button>
                        <select id="curr-to" class="p-4 rounded-xl font-bold">
                            <option value="EUR">EUR</option>
                            <option value="USD">USD</option>
                            <option value="GBP">GBP</option>
                            <option value="INR">INR</option>
                        </select>
                    </div>
                    <button onclick="convertCurrency()" class="w-full bg-sage text-deep font-black py-4 rounded-xl">CONVERT</button>
                    <div id="curr-result" class="text-center text-2xl font-bold text-sand mt-6"></div>
                </div>
            </div>
        </section>

        <section id="json-section" class="hidden">
            <button onclick="showSection('home')" class="text-sage mb-8 flex items-center ">
                <i class="fa-solid fa-angle-left mr-2"></i> Back
            </button>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                <textarea id="json-input" rows="12" class="w-full p-6 rounded-2xl font-mono text-xs" placeholder="Paste JSON here..."></textarea>
                <textarea id="json-output" rows="12" class="w-full p-6 rounded-2xl font-mono text-xs" readonly placeholder="Output..."></textarea>
            </div>
            <div class="mt-6 flex gap-4">
                <button onclick="processJSON('beautify')" class="bg-moss text-sand px-8 py-3 rounded-xl font-bold"><i class="fa-solid fa-wand-magic-sparkles mr-2"></i>Beautify</button>
                <button onclick="processJSON('minify')" class="border border-moss text-sand px-8 py-3 rounded-xl font-bold"><i class="fa-solid fa-compress mr-2"></i>Minify</button>
            </div>
        </section>

        <section id="clock-section" class="hidden">
            <button onclick="showSection('home')" class="text-sage mb-8 flex items-center ">
                <i class="fa-solid fa-angle-left mr-2"></i> Back
            </button>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 text-center">
                <div class="glass-panel p-8 rounded-3xl flex flex-col justify-center min-h-[250px]">
                    <h3 class="text-moss font-bold text-xs uppercase mb-4"><i class="fa-solid fa-clock mr-1"></i> System Time</h3>
                    <div id="big-clock" class="text-5xl font-black text-sand">00:00:00</div>
                </div>
                <div class="glass-panel p-8 rounded-3xl flex flex-col justify-center min-h-[250px]">
                    <h3 class="text-moss font-bold text-xs uppercase mb-4"><i class="fa-solid fa-stopwatch-20 mr-1"></i> Stopwatch</h3>
                    <div id="sw-display" class="text-4xl font-mono text-sand mb-6">00:00.00</div>
                    <div class="flex gap-2">
                        <button id="sw-btn" onclick="toggleStopwatch()" class="flex-1 bg-moss py-2 rounded-lg font-bold">Start</button>
                        <button onclick="resetStopwatch()" class="flex-1 border border-moss py-2 rounded-lg font-bold">Reset</button>
                    </div>
                </div>
                <div class="glass-panel p-8 rounded-3xl flex flex-col justify-center min-h-[250px]">
                    <h3 class="text-moss font-bold text-xs uppercase mb-4"><i class="fa-solid fa-hourglass-start mr-1"></i> Timer</h3>
                    <div id="timer-setup">
                        <div class="flex justify-center gap-2 mb-4">
                            <input type="number" id="timer-min" placeholder="M" class="w-16 p-2 rounded text-center">
                            <input type="number" id="timer-sec" placeholder="S" class="w-16 p-2 rounded text-center">
                        </div>
                        <button onclick="startTimer()" class="w-full bg-sage text-deep font-bold py-2 rounded-xl">START</button>
                    </div>
                    <div id="timer-running" class="hidden">
                        <div id="timer-display" class="text-5xl font-mono text-sand mb-4">00:00</div>
                        <button onclick="cancelTimer()" class="w-full border border-moss py-2 rounded-xl">CANCEL</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="pass-section" class="hidden">
            <button onclick="showSection('home')" class="text-sage mb-8 flex items-center ">
                <i class="fa-solid fa-angle-left mr-2"></i> Back
            </button>
            <div class="max-w-xl mx-auto glass-panel p-10 rounded-3xl">
                <h2 class="text-3xl font-bold mb-8">Password Generator</h2>
                <div id="pass-display" class="bg-black/40 p-6 rounded-2xl text-center text-xl font-mono text-sage border border-moss/20 mb-6 break-all">Click Generate</div>
                <div class="mb-8">
                    <div class="flex justify-between text-xs text-moss mb-2 uppercase font-bold"><span>Length</span><span id="pl-label">16</span></div>
                    <input type="range" id="pass-length" min="4" max="64" value="16" oninput="document.getElementById('pl-label').innerText=this.value" class="w-full accent-sage">
                </div>
                <div class="grid grid-cols-2 gap-4 mb-8">
                    <label class="flex items-center gap-3 cursor-pointer group">
                        <input type="checkbox" id="p-upper" checked class="w-5 h-5 accent-sage">
                        <span class="text-sm text-sand/70 group-hover:text-sand">Uppercase (A-Z)</span>
                    </label>
                    <label class="flex items-center gap-3 cursor-pointer group">
                        <input type="checkbox" id="p-lower" checked class="w-5 h-5 accent-sage">
                        <span class="text-sm text-sand/70 group-hover:text-sand">Lowercase (a-z)</span>
                    </label>
                    <label class="flex items-center gap-3 cursor-pointer group">
                        <input type="checkbox" id="p-number" checked class="w-5 h-5 accent-sage">
                        <span class="text-sm text-sand/70 group-hover:text-sand">Numbers (0-9)</span>
                    </label>
                    <label class="flex items-center gap-3 cursor-pointer group">
                        <input type="checkbox" id="p-symbol" class="w-5 h-5 accent-sage">
                        <span class="text-sm text-sand/70 group-hover:text-sand">Symbols (!@#$)</span>
                    </label>
                </div>
                <button onclick="generatePassword()" class="w-full bg-sage text-deep font-black py-4 rounded-xl hover:opacity-90">GENERATE PASSWORD</button>
            </div>
        </section>

        <section id="weather-section" class="hidden">
            <button onclick="showSection('home')" class="text-sage mb-8 flex items-center ">
                <i class="fa-solid fa-angle-left mr-2"></i> Back
            </button>
            <div class="max-w-xl mx-auto glass-panel p-10 rounded-3xl text-center">
                <h2 class="text-3xl font-bold mb-8">Weather Station</h2>
                <div class="flex gap-2 mb-4">
                    <input type="text" id="weather-city" placeholder="Enter city name..." class="flex-1 p-4 rounded-xl">
                    <button onclick="getWeatherByCity()" class="bg-sage text-deep px-6 rounded-xl font-bold"><i class="fa-solid fa-magnifying-glass"></i></button>
                </div>
                <button onclick="getPreciseLocation()" class="w-full border border-sage/20 text-sage py-3 rounded-xl mb-8 hover:bg-sage/10 transition-all">Use My Location</button>
                <div id="weather-display" class="hidden space-y-6">
                    <h3 id="w-name" class="text-2xl font-bold">--</h3>
                    <p id="w-desc" class="italic opacity-50">--</p>
                    <div id="w-temp" class="text-6xl font-black text-sage">--°C</div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-black/20 p-4 rounded-2xl"><div class="text-xs opacity-40 mb-1">Humidity</div><div id="w-humidity">--%</div></div>
                        <div class="bg-black/20 p-4 rounded-2xl"><div class="text-xs opacity-40 mb-1">Wind</div><div id="w-wind">-- m/s</div></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="calendar-section" class="hidden">
            <button onclick="showSection('home')" class="text-sage mb-8 flex items-center ">
                <i class="fa-solid fa-angle-left mr-2"></i> Back
            </button>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 glass-panel p-8 rounded-3xl">
                    <div class="flex justify-between items-center mb-6">
                        <h3 id="cal-month-year" class="text-2xl font-bold">--</h3>
                        <div class="flex gap-2">
                            <button onclick="changeMonth(-1)" class="p-2 hover:bg-moss/30 rounded-lg"><i class="fa-solid fa-chevron-left"></i></button>
                            <button onclick="changeMonth(1)" class="p-2 hover:bg-moss/30 rounded-lg"><i class="fa-solid fa-chevron-right"></i></button>
                        </div>
                    </div>
                    <div class="grid grid-cols-7 gap-1 text-center font-bold text-moss text-[10px] uppercase mb-2">
                        <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
                    </div>
                    <div id="cal-days" class="grid grid-cols-7 gap-1"></div>
                </div>
                <div class="glass-panel p-6 rounded-2xl h-fit">
                    <h4 class="text-sage font-bold mb-4 italic">Age Calculator</h4>
                    <input type="date" id="dob" class="w-full p-3 rounded-xl mb-3">
                    <button onclick="calcAge()" class="w-full bg-sage text-deep font-bold py-2 rounded-lg">Calculate</button>
                    <div id="age-out" class="mt-4 text-center font-bold"></div>
                </div>
            </div>
        </section>

    </main>

    <button onclick="toggleDevModal()" class="fixed bottom-6 right-6 w-14 h-14 bg-sage text-deep rounded-full shadow-2xl flex items-center justify-center hover:scale-110 active:scale-95 transition-all z-[60] text-2xl font-bold">
        <i class="fa-solid fa-circle-info"></i>
    </button>

    <div id="dev-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-[70] hidden flex items-center justify-center p-6" onclick="if(event.target.id==='dev-modal')toggleDevModal()">
        <div class="bg-deep border border-moss w-full max-w-sm rounded-[2.5rem] p-8 text-center glass-panel">
            <div class="w-20 h-20 bg-moss rounded-full mx-auto mb-4 flex items-center justify-center text-deep text-3xl font-bold"><i class="fa-solid fa-user-tie"></i></div>
            <h2 class="text-2xl font-black text-sand">Prince Kumar</h2>
            <p class="text-sand/50 text-sm my-4">Building tools with love and precision.</p>
            <div class="flex justify-center gap-4 mb-6">
                <a href="https://www.youtube.com/@myenv" target="_blank" class="w-10 h-10 bg-black/40 rounded-full flex items-center justify-center hover:bg-moss/30"><i class="fa-brands fa-youtube text-sage"></i></a>
                <a href="https://www.instagram.com/myenv.in" target="_blank" class="w-10 h-10 bg-black/40 rounded-full flex items-center justify-center hover:bg-moss/30"><i class="fa-brands fa-instagram text-sage"></i></a>
                <a href="https://www.linkedin.com/in/princekumar0711/" target="_blank" class="w-10 h-10 bg-black/40 rounded-full flex items-center justify-center hover:bg-moss/30"><i class="fa-brands fa-linkedin-in text-sage"></i></a>
            </div>
            <button onclick="toggleDevModal()" class="w-full py-2 border border-moss text-sand/40 rounded-xl">Close</button>
        </div>
    </div>

    <script>
        const apiKey = "a91669b4d4d84a0eed319aa78df56625";

        // NAVIGATION
        function showSection(id) {
            document.querySelectorAll('main > section').forEach(s => s.classList.add('hidden'));
            document.getElementById(id + '-section').classList.remove('hidden');
            if (id === 'ai') renderAITools(aiTools);
            if (id === 'calendar') renderCalendar();
            window.scrollTo(0, 0);
        }
        function toggleDevModal() { document.getElementById('dev-modal').classList.toggle('hidden'); }

        // LIVE CLOCK
        function updateClocks() {
            const now = new Date();
            const t = now.toLocaleTimeString([], { hour12: false });
            document.getElementById('nav-clock').innerText = t;
            document.getElementById('nav-date').innerText = now.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
            if (document.getElementById('big-clock')) document.getElementById('big-clock').innerText = t;
        }
        setInterval(updateClocks, 1000); updateClocks();

        // AI LEXICON
        const aiTools = [
            { name: "ChatGPT", cat: "text", desc: "OpenAI's standard-setting AI.", link: "https://chat.openai.com", icon: "fa-solid fa-message" },
            { name: "Claude", cat: "text", desc: "Anthropic's focus on safety.", link: "https://claude.ai", icon: "fa-solid fa-brain" },
            { name: "Gemini", cat: "text", desc: "Google's most capable model.", link: "https://gemini.google.com", icon: "fa-solid fa-sparkles" },
            { name: "Midjourney", cat: "image", desc: "High-end artistic creation.", link: "https://midjourney.com", icon: "fa-solid fa-palette" },
            { name: "DALL-E 3", cat: "image", desc: "Photorealistic generations.", link: "https://labs.openai.com", icon: "fa-solid fa-image" },
            { name: "GitHub Copilot", cat: "code", desc: "AI pair programming.", link: "https://github.com/features/copilot", icon: "fa-brands fa-github" },
            { name: "Cursor", cat: "code", desc: "The AI-first code editor.", link: "https://cursor.com", icon: "fa-solid fa-terminal" },
            { name: "Perplexity", cat: "productivity", desc: "AI search with sources.", link: "https://perplexity.ai", icon: "fa-solid fa-magnifying-glass" },
            { name: "ElevenLabs", cat: "productivity", desc: "Realistic voice synthesis.", link: "https://elevenlabs.io", icon: "fa-solid fa-microphone" },
            { name: "Notion AI", cat: "productivity", desc: "Integrated writing aid.", link: "https://notion.so", icon: "fa-solid fa-file-pen" },
            { name: "DeepL", cat: "text", desc: "Nuanced AI translation.", link: "https://deepl.com", icon: "fa-solid fa-language" },
            { name: "Sora", cat: "image", desc: "Text-to-video by OpenAI.", link: "https://openai.com/sora", icon: "fa-solid fa-film" }
        ];

        function renderAITools(tools) {
            const grid = document.getElementById('ai-grid');
            grid.innerHTML = tools.map(t => `
                <a href="${t.link}" target="_blank" class="p-6 rounded-2xl bg-black/20 border border-moss/20 hover:border-sage transition-all group flex gap-4 items-center">
                    <div class="w-12 h-12 bg-moss/20 rounded-xl flex items-center justify-center text-sage text-xl group-hover:bg-sage group-hover:text-deep transition-all">
                        <i class="${t.icon}"></i>
                    </div>
                    <div>
                        <div class="flex items-center gap-2">
                            <h4 class="font-bold text-sand group-hover:text-sage">${t.name}</h4>
                            <span class="text-[8px] uppercase border border-moss/40 px-1 rounded text-moss">${t.cat}</span>
                        </div>
                        <p class="text-sand/40 text-xs mt-1">${t.desc}</p>
                    </div>
                </a>
            `).join('');
        }

        function filterAITools() {
            const q = document.getElementById('ai-search').value.toLowerCase();
            const c = document.getElementById('ai-category-filter').value;
            const f = aiTools.filter(t => (t.name.toLowerCase().includes(q) || t.desc.toLowerCase().includes(q)) && (c === 'all' || t.cat === c));
            if (f.length === 0 && q.length > 2) {
                document.getElementById('ai-grid').innerHTML = `<div class="col-span-full text-center py-10"><p class="opacity-40 mb-4">No tool found locally.</p><a href="https://www.futurepedia.io/ai-tools?q=${q}" target="_blank" class="bg-sage text-deep px-6 py-2 rounded-full font-bold">Search External</a></div>`;
            } else renderAITools(f);
        }

        // PASSWORD GEN
        function generatePassword() {
            const l = document.getElementById('pass-length').value;
            const sets = { u: "ABCDEFGHIJKLMNOPQRSTUVWXYZ", lo: "abcdefghijklmnopqrstuvwxyz", n: "0123456789", s: "!@#$%^&*()_+~" };
            let p = "";
            if (document.getElementById('p-upper').checked) p += sets.u;
            if (document.getElementById('p-lower').checked) p += sets.lo;
            if (document.getElementById('p-number').checked) p += sets.n;
            if (document.getElementById('p-symbol').checked) p += sets.s;
            if (!p) return alert("Select at least one set!");
            let res = "";
            for (let i = 0; i < l; i++) res += p.charAt(Math.floor(Math.random() * p.length));
            document.getElementById('pass-display').innerText = res;
        }

        // WEATHER
        async function fetchWeather(url) {
            try {
                const r = await fetch(url);
                const d = await r.json();
                if (!r.ok) throw new Error("City not found");
                document.getElementById('w-name').innerText = `${d.name}, ${d.sys.country}`;
                document.getElementById('w-desc').innerText = d.weather[0].description;
                document.getElementById('w-temp').innerText = `${Math.round(d.main.temp)}°C`;
                document.getElementById('w-humidity').innerText = `${d.main.humidity}%`;
                document.getElementById('w-wind').innerText = `${d.wind.speed} m/s`;
                document.getElementById('weather-display').classList.remove('hidden');
            } catch (e) { alert(e.message); }
        }
        function getWeatherByCity() { fetchWeather(`https://api.openweathermap.org/data/2.5/weather?q=${document.getElementById('weather-city').value}&units=metric&appid=${apiKey}`); }
        function getPreciseLocation() { navigator.geolocation.getCurrentPosition(p => fetchWeather(`https://api.openweathermap.org/data/2.5/weather?lat=${p.coords.latitude}&lon=${p.coords.longitude}&units=metric&appid=${apiKey}`)); }

        // CURRENCY
        async function convertCurrency() {
            const a = document.getElementById('curr-amount').value, f = document.getElementById('curr-from').value, t = document.getElementById('curr-to').value;
            const r = await fetch(`https://open.er-api.com/v6/latest/${f}`);
            const d = await r.json();
            document.getElementById('curr-result').innerText = `${a} ${f} = ${(a * d.rates[t]).toFixed(2)} ${t}`;
        }
        function swapCurrencies() { const f = document.getElementById('curr-from'), t = document.getElementById('curr-to'), v = f.value; f.value = t.value; t.value = v; }

        // JSON
        function processJSON(m) {
            try {
                const p = JSON.parse(document.getElementById('json-input').value);
                document.getElementById('json-output').value = m === 'beautify' ? JSON.stringify(p, null, 4) : JSON.stringify(p);
            } catch (e) { alert("Invalid JSON"); }
        }

        // STOPWATCH
        let swS, swI, swR = false;
        function toggleStopwatch() {
            const b = document.getElementById('sw-btn');
            if (!swR) { swS = Date.now(); swI = setInterval(() => document.getElementById('sw-display').innerText = new Date(Date.now() - swS).toISOString().slice(14, 21), 10); b.innerText = "Stop"; swR = true; }
            else { clearInterval(swI); b.innerText = "Start"; swR = false; }
        }
        function resetStopwatch() { clearInterval(swI); swR = false; document.getElementById('sw-display').innerText = "00:00.00"; document.getElementById('sw-btn').innerText = "Start"; }

        // TIMER
        let tI, tS = 0;
        function startTimer() {
            tS = (parseInt(document.getElementById('timer-min').value) || 0) * 60 + (parseInt(document.getElementById('timer-sec').value) || 0);
            if (tS <= 0) return;
            document.getElementById('timer-setup').classList.add('hidden');
            document.getElementById('timer-running').classList.remove('hidden');
            tI = setInterval(() => {
                tS--;
                document.getElementById('timer-display').innerText = `${Math.floor(tS / 60).toString().padStart(2, '0')}:${(tS % 60).toString().padStart(2, '0')}`;
                if (tS <= 0) { clearInterval(tI); alert("Timer Finished!"); cancelTimer(); }
            }, 1000);
        }
        function cancelTimer() { clearInterval(tI); document.getElementById('timer-setup').classList.remove('hidden'); document.getElementById('timer-running').classList.add('hidden'); }

        // CALENDAR
        let calD = new Date();
        function renderCalendar() {
            const y = calD.getFullYear(), m = calD.getMonth();
            document.getElementById('cal-month-year').innerText = `${new Intl.DateTimeFormat('en-US', { month: 'long' }).format(calD)} ${y}`;
            const f = new Date(y, m, 1).getDay(), l = new Date(y, m + 1, 0).getDate(), c = document.getElementById('cal-days');
            c.innerHTML = '';
            for (let i = 0; i < f; i++) c.appendChild(document.createElement('div'));
            for (let i = 1; i <= l; i++) {
                const d = document.createElement('div'); d.innerText = i;
                d.className = (new Date().getDate() === i && new Date().getMonth() === m && new Date().getFullYear() === y) ? "h-12 flex items-center justify-center rounded-lg bg-sage text-deep font-bold shadow-lg" : "h-12 flex items-center justify-center hover:bg-moss/20 rounded-lg cursor-default";
                c.appendChild(d);
            }
        }
        function changeMonth(d) { calD.setMonth(calD.getMonth() + d); renderCalendar(); }
        function calcAge() {
            const b = new Date(document.getElementById('dob').value); if (isNaN(b)) return;
            document.getElementById('age-out').innerText = `${Math.floor((new Date() - b) / 31557600000)} years old`;
        }
    </script>
</body>
</html>